/*! */
W.define("dataManipulators",[],function(){return{trimRhData:function(t,e){var i,n,s=e.data,r=s.hours,a=t,o=r.indexOf(a[0]),h=a.indexOf(r[0]);if(o<0&&0<h)for(n=0;n<h;n++)for(i in s)s[i].unshift(s[i][0]);else if(0<o)for(i in s)s[i].splice(0,o);else if(o<0)return console.error("Unable to sync data tables"),void window.wError("detail","Unable to sync data tables from begining");if(r.length>a.length)for(i in s)s[i].splice(a.length);else if(r.length<a.length){var l=a.length-r.length,d=r.length-1;for(n=0;n<l;n++)for(i in s)s[i].push(s[i][d])}return e}}}),
/*! */
W.define("ImageMakerExt",["ImageMaker"],function(t){return t.extend({lerp:function(t,e,i){return t+i*(e-t)},cubicHermite:function(t,e,i,n,s){return(.5*-t+3*e*.5-3*i*.5+.5*n)*s*s*s+(t-5*e*.5+2*i-.5*n)*s*s+(.5*-t+.5*i)*s+e},bicubicFiltering:function(t,e,i){return this.cubicHermite(this.cubicHermite(t[0],t[1],t[2],t[3],e),this.cubicHermite(t[4],t[5],t[6],t[7],e),this.cubicHermite(t[8],t[9],t[10],t[11],e),this.cubicHermite(t[12],t[13],t[14],t[15],e),i)},clamp0X:function(t,e){return Math.min(Math.max(t,0),e-1)}})}),
/*! */
W.define("WaveRow",["Row"],function(t){return t.extend({metric:"waves",colors:"wavesDetail",renderTD:function(t,e,i,n){var s=i[this.propName+"Dir"][n];return'<div style="transform: rotate('+s+"deg);\n                    -webkit-transform:rotate("+s+'deg);">#</div>'+e}})}),
/*! */
W.define("WindCombined",["Row"],function(t){return t.extend({ident:"windCombined",metric:"wind",colors:"windDetail",renderTD:function(t,e,i,n){var s=i[this.dirPropName][n];return'<div style="transform: rotate('+s+"deg);\n                    -webkit-transform:rotate("+s+'deg);">#</div>'+e+"<small>"+this.convert(i[this.gustPropName][n])+"</small>"}})}),
/*! */
W.define("colorsExtended",["colors","Color"],function(t,e){return t.wavesDetail=e.instance({ident:"wavesDetail",steps:256,default:[[0,[255,255,255,0]],[.1,[255,255,255,0]],[1,[180,180,255,255]],[2.5,[254,174,0,255]],[20,[255,255,255,255]]]}),t.periodDetail=e.instance({ident:"periodDetail",steps:256,default:[[0,[255,255,255,0]],[5,[255,255,255,0]],[10,[255,237,180,255]],[20,[180,255,180,255]]]}),t.altitudeDetail=e.instance({ident:"altitudeDetail",steps:256,default:[[0,[255,197,254,256]],[129,[255,199,254,256]],[149,[255,167,179,256]],[279,[255,177,179,256]],[299,[175,203,255,256]],[879,[157,194,255,256]],[914,[159,255,170,256]],[1499,[163,255,172,256]],[7999,[255,255,255,256]]]}),t.visibilityDetail=e.instance({ident:"visibilityDetail",steps:256,default:[[0,[251,180,251,256]],[1600,[253,173,255,256]],[2200,[255,175,176,256]],[5e3,[255,165,165,256]],[6e3,[179,187,255,256]],[8e3,[169,182,255,256]],[9e3,[179,255,187,256]],[15e3,[178,255,171,255]],[20004,[255,255,255,256]]]}),t}),
/*! */
W.define("Row",["trans","Class","rootScope","metrics","overlays","colorsExtended"],function(i,t,c,e,n,s){return t.extend({ident:null,legendName:null,legendTrans:null,metric:null,propName:null,colors:null,acceptNullValues:!1,_init:function(){this.metric||(this.metric=this.ident),this.metricObj=e[this.metric]||null,null==this.legendTrans&&(this.legendTrans=n[this.ident]&&n[this.ident].trans||null),this.propName||(this.propName=this.ident);var t=s[this.colors];this.colorize=t?t.getColor.call(t).color.bind(t):null,this.convert=this.metricObj?this.metricObj.convertNumber.bind(this.metricObj):function(t){return t}},addClasses:function(t){return"height-"+this.ident+" d-display-"+t.display},renderLegend:function(t,e){return'<div class="legend-'+this.ident+" "+this.addClasses(t)+'"><span\n\t\t\t\t\tclass="legend-left">'+(this.legendName||i[this.legendTrans]||"")+'</span><span\n\t\t\t\t\tdata-do="metric,'+this.metric+'"\n\t\t\t\t\tclass="legend-right '+(this.metricObj?"metric-clickable":"")+'"\n\t\t\t\t\t>'+(this.metricObj&&this.metricObj.metric||"")+"</span\n\t\t\t\t\t>"+(e||"")+"</div>"},get3colors:function(t,e){var i=t[Math.max(e-1,0)],n=t[e],s=t[Math.min(e+1,t.length-1)];return'style="background: linear-gradient(to right,'+this.colorize(.5*(n+i))+","+this.colorize(n)+","+this.colorize(.5*(n+s))+')"'},renderRow:function(t,e,i){var n='<tr class="td-'+this.ident+" "+this.addClasses(e)+'">';this.length=t.hour.length,this.options=e;for(var s=t[this.propName]||[],r=0;r<s.length;r++){this.classes=[];var a=s[r];if(null!==a&&!isNaN(a)&&void 0!==a||this.acceptNullValues){var o=this.convert(a),h=this.colorize?this.get3colors(s,r):"",l=this.renderTD(a,o,t,r);t.day[r]!==t.day[Math.min(r+1,this.length-1)]&&this.classes.push("day-end");var d=i.merged&&r==i.mergedModelStart;d&&this.classes.push("secondary-model"),n+="<td "+(this.classes.length?' class="'+this.classes.join(" ")+'"':"")+"\n\t\t\t\t\t"+("hour"===this.propName?' data-ts="'+t.ts[r]+'"':"")+"\n\t\t\t\t\t"+(c.isMobile?' data-do="index,'+r+'"':"")+"\n\t\t\t\t\t"+(d?' data-model1="⇦ '+i.model+'" data-model2="'+i.mergedModelName+' ⇨"':"")+"\n\t\t\t\t\t"+h+">"+l+"</td>"}else n+="<td></td>"}return n+"</tr>"},renderTD:function(t,e){return e}})}),
/*! */
W.define("iMakerExtended",["iMaker","ImageGraph","ImageMaker"],function(t,e,i){return t.pressure=e.extend({bottomWhitten:!1,strokeStyle:"rgba(91, 126, 158, 0.3)",lineWidth:1}),t.dewpointTemp=t.temp.extend({render:function(t,e,i){void 0===i&&(i=1),this.checkData(t),this.checkData(e);for(var n,s=this.ctx,r=t.length,a=this.tdWidth,o=a>>1,h=this.h,l=[],d=[],c=-1/0,u=1/0,m=-a-o,f=0;f<r;++f){var p=t[f];p<u?u=p:c<p&&(c=p)}for(u-=1,(n=(c=(u-=Math.round(.05*(c-u)))+Math.round(c-u))-u)<10&&(n=Math.round(.5*(10-n)),u-=Math.round(.5*n),c+=Math.round(1.5*n)),this.t0_=u,this.t1_=c,f=0;f<r+4;++f){var g=Math.max(0,Math.min(f-2,r-1)),v=t[g],w=Math.max(e[g]-.5,u);l.push([m,this.getY(v,u,c,h),v]),d.push([m,this.getY(w,u,c,h),w]),m+=a}for(f=0;f<r;++f)l[f+2][1]=.6*l[f+2][1]+.15*(l[f+1][1]+l[f+3][1])+.05*(l[f][1]+l[f+4][1]),d[f+2][1]=.6*d[f+2][1]+.15*(d[f+1][1]+d[f+3][1])+.05*(d[f][1]+d[f+4][1]);for(s.beginPath(),s.moveTo(l[1][0],h),s.lineTo(l[1][0],l[1][1]),f=0;f<r+1;++f){var b=this.getControlPoint(l[f],l[f+1],l[f+2]),T=this.getControlPoint(l[f+3],l[f+2],l[f+1]);s.bezierCurveTo(b[0],b[1],T[0],T[1],l[f+2][0],l[f+2][1])}for(s.lineTo(d[f+2][0],d[f+2][1]),f=r;0<=f;--f){var x=this.getControlPoint(d[f+3],d[f+2],d[f+1]),D=this.getControlPoint(d[f],d[f+1],d[f+2]);s.bezierCurveTo(x[0],x[1],D[0],D[1],d[f+1][0],d[f+1][1])}return s.fillStyle=this.createGradient(u,c,i),s.fill(),this}}),t.rain=i.extend({mm2h:function(t){return(t=(t-=.2)<3?t/3*.25:t<10?(t-3)/7*.25+.25:t<20?(t-10)/10*.25+.5:Math.min(.9,(t-20)/30*.25+.75))*this.h},spline:function(t,e,i,n,s){return.5*(2*e+(-t+i)*s+(2*t-5*e+4*i-n)*s*s+(3*e-t-3*i+n)*s*s*s)},render:function(t){var e=t.mm;this.ctx.save(),this.ctx.transform(1,0,0,-1,0,this.h);for(var i=0;i<e.length;i++)this.paintRainPiece(e,i);return this.ctx.restore(),this},computeInterValues:function(t,e){return[t[Math.max(e-2,0)],t[Math.max(e-1,0)],t[e],t[Math.min(e+1,t.length-1)],t[Math.min(e+2,t.length-1)]]},paintRainPiece:function(t,e){var i,n=this.computeInterValues(t,e),s=e*this.tdWidth,r=n.map(this.mm2h.bind(this));for(this.ctx.fillStyle="#CEF1FA",this.ctx.beginPath(),this.ctx.moveTo(s,0),i=.5;i<=1;i+=.1)this.ctx.lineTo(s+this.tdWidth*(i-.5),this.spline(r[0],r[1],r[2],r[3],i));for(i=0;i<=.5;i+=.1)this.ctx.lineTo(s+this.tdWidth*(i+.5),this.spline(r[1],r[2],r[3],r[4],i));this.ctx.lineTo(s+this.tdWidth,0),this.ctx.fill()}}),t}),
/*! */
W.define("meteogram",["ImageMakerExt"],function(t){return t.instance({cLine:"rgba(0,0,0,0.1)",cText:"rgba(0,0,0,0.4)",hrParsAlt1:[-70,.038,6],hrParsAlt0:[-60,.025,4],hrLerpFactorPow:1,hrPow2:.7,hrAltName:[null,"950h","925h","900h","850h","800h","700h","600h","500h","400h","300h","200h","150h",null],hrAlt:[0,5,11,16.7,25,33.4,50,58.4,66.7,75,83.3,92,98,100],txAlt:["","900h 900m 3000ft","800h 2km 6400ft","700h 3km FL100","500h 5km FL180","300h 9km FL300"],prepareStepLut:function(){this.clut=new Uint8Array(256);for(var t=0;t<160;t++)this.clut[t]=this.clamp0X(24*Math.floor((t+12)/16),160)},step:function(t){return this.clut[Math.floor(this.clamp0X(t,160))]},legend:function(){var t,e,i=this.ctx,n=this.h,s=n/6,r=0;for(i.font="8px Verdana",i.fillStyle=this.cText,i.setLineDash([4,4]),i.lineWidth=1,i.strokeStyle=this.cLine,i.beginPath(),t=1;t<6;t++)for(n-=s,e=0;e<2;e++)r=0,e&&(r=this.w,i.moveTo(0,n),i.lineTo(this.w,n)),i.textAlign=e?"right":"left",i.fillText(" "+this.txAlt[t]+" ",r,n+8+2);i.stroke(),i.setLineDash([])},render:function(t){var e,i,n,s,r,a,o,h,l,d,c=this.getPixelRatioAdjustedSize(this.tdWidth),u=c*this.num,m=this.getPixelRatioAdjustedSize(this.h),f=this,p=t.data,g=p["rh-1000h"].length,v=g-g,w=g,b=f.hrAltName.length,T=w-v,x=T*b,D=new Float32Array(x+x),M=0;for(i=0;i<b;++i)if(null==f.hrAltName[i])for(e=v;e<w;++e)D[M++]=0,D[M++]=0;else for(n=p["rh-"+f.hrAltName[i]],s=.01*f.hrAlt[i],r=f.lerp(this.hrParsAlt0[0],this.hrParsAlt1[0],s),a=f.lerp(this.hrParsAlt0[1],this.hrParsAlt1[1],s),o=f.lerp(this.hrParsAlt0[2],this.hrParsAlt1[2],s),h=1-.8*Math.pow(s,this.hrPow2),e=v;e<w;++e)l=Number(n[e]),d=Math.max(0,Math.min((l+r)*a,1)),d=Math.pow(d,o)*h,D[M++]=d,D[M++]=l;var y=document.createElement("canvas");y.width=u,y.height=m;var N,P,C,W,A,E,H,k,L,R,S,I,O,_,F,U,z,j,X,V,Z,G,J,Y=y.getContext("2d"),B=Y.getImageData(0,0,u,m),K=B.data,$=.01*(m-1),q=m,Q=c+1>>1,tt=m+m,et=new Int32Array(tt),it=new Float32Array(16);for(void 0===this.clut&&this.prepareStepLut(),i=0;i<b-1;++i)for(N=q,q=Math.round(m-1-f.hrAlt[i+1]*$),C=(P=T+T)*this.clamp0X(i+2,b),W=P*this.clamp0X(i+1,b),A=P*this.clamp0X(i+0,b),E=P*this.clamp0X(i-1,b),k=Q,R=1/(L=N-q),e=H=0;e<1+T;++e){if(S=2*this.clamp0X(e-2,T),I=2*this.clamp0X(e-1,T),O=2*this.clamp0X(e+0,T),_=2*this.clamp0X(e+1,T),it[0]=D[C+S],it[1]=D[C+I],it[2]=D[C+O],it[3]=D[C+_],it[4]=D[W+S],it[5]=D[W+I],it[6]=D[W+O],it[7]=D[W+_],it[8]=D[A+S],it[9]=D[A+I],it[10]=D[A+O],it[11]=D[A+_],it[12]=D[E+S],it[13]=D[E+I],it[14]=D[E+O],it[15]=D[E+_],U=1/(F=k-H),z=4*(q*u+H),0===e&&0<L)for(j=1/L,X=0;X<L;X++)et[--tt]=i,et[--tt]=Math.round(1e4*j*X);for(V=0;V<L;++V)for(Z=z+V*u*4,G=0;G<F;++G)J=this.step(160*f.bicubicFiltering(it,U*G,R*V)),K[Z++]=255-J,K[Z++]=255-J,K[Z++]=255-J,K[Z++]=10<J?255:0;H=k,u<(k+=c)&&(k=u)}return Y.putImageData(B,0,0),this.ctx.drawImage(y,0,0,this.w,this.h),this.legend(),this}})}),
/*! */
W.define("multiLoad",["utils","http","rootScope"],function(a,s,r){var n=function(t){var r=t.reduce(function(t,e){var i=e.fcst;return Math.max(t,i.data.ts[0])},0);return t.forEach(function(t){for(var e=t.fcst,i=e.data.ts,n=0;i[n]<r;)n++;for(var s in e.data)e.data[s].splice(0,n)}),t.forEach(function(t){var e=t.fcst,i=e.data.day,n=e.summary,s=Object.keys(n)[0];0<i[0].localeCompare(s,"en")&&delete n[s],a.each(n,function(t,e){t.index=i.indexOf(e),t.segments=i.filter(function(t){return t===e}).length})}),t};return function(t,e){return new Promise(function(i){Promise.all(e.map(function(n){return new Promise(function(i){s.get(r.pointForecast+"/"+n+"/"+t.lat+"/"+t.lon).then(function(t){var e=t.data;return i(e?{model:n,fcst:e}:null)}).catch(function(){return i(null)})})})).then(function(t){var e=t?n(t.filter(function(t){return t&&t.fcst})):[];i(e)}).catch(function(t){window.wError("multiLoad","Loading/rendering models",t)})})}}),
/*! */
W.define("weatherRenderExtended",["format","$","utils","weatherTable","weatherRender","iMakerExtended","trans","meteogram","store"],function(h,l,n,r,t,s,d,i,c){return n.include(t,{syncCounter:0,renderLegend:function(e){var i=this;return'<div class="legend-days height-days"><span class="legend-left"></span><span class="legend-right"></span></div>\n                \t'+(e?e.rows:this.rows).map(function(t){return r[t].renderLegend(e||i.options)}).join("")},renderInfo:function(){var t=this.json.header,e="",i=h.howOld({ts:new Date(t.update).getTime()||t.update,translate:!0});return e+="<span>"+d.MENU_D_UPDATED+": "+i+"</span>"},renderAboutLocation:function(t){var e=t.header,i=t.celestial;try{var n=l(".services-container",this.el),s=c.get("zuluMode"),r=h.getHoursFunction(),a=function(t,e){var i=t.split(":"),n=r(+i[0],+i[1]);return s?n+"&nbsp;("+h.hourMinuteUTC(e)+")":n},o="<li>"+h.DD2DMS(this.options.lat,this.options.lon)+"</li>\n\t\t\t\t\t<li>"+e.tzName+" ("+i.TZoffsetFormatted+")</li>\n\t\t\t\t\t"+(i.sunrise?'<li class="first-big">'+d.D_SUNRISE+": "+a(i.sunrise,i.sunriseTs)+"</li>":"")+"\n\t\t\t\t\t"+(i.sunset?'<li class="first-big">'+d.D_SUNSET+": "+a(i.sunset,i.sunsetTs)+"</li>":"")+"\n\t\t\t\t\t"+(i.dusk?'<li class="first-big">'+d.D_DUSK+": "+a(i.dusk,i.duskTs)+"</li>":"")+'\n\t\t\t\t\t<li class="first-big">'+d.ALTITUDE+": "+parseInt(e.elevation)+"m ("+parseInt(3.28*e.elevation)+"ft)</li>";n.style.height=this.getHeight()+"px",n.innerHTML=o}catch(t){window.wError("detail-render","Failed to render about locaiton",t)}return this},renderTableDays:function(){var i='<tr class="td-days height-days">';return this.giveMeDays(function(t,e){i+='<td colspan="'+e+'" class="sticky-title-wrapper"',i+=3<e?' data-day="'+t.date+'"><div class="sticky-title" data-daydiv="'+t.date+'">'+d[t.weekday]+" "+t.day+"</div></td>":">&nbsp;</td>"}),i+="</tr>"},renderMeteogram:function(t){if(this.canvas){var e=this.getHeight()-110;return n.contains(this.rows,"cbase")&&(e-=17),i.mixinCanvas(this.canvas).setHeight(110).setOffset(e).render(t).resetCanvas(),n.contains(this.rows,"pressure")&&s.pressure.mixinCanvas(this.canvas).setHeight(80).setOffset(e+15).render(this.data.pressure).resetCanvas(),this}},renderAirgram:function(t){if(this.canvas)return W.airgram.mixinCanvas(this.canvas).setHeight(273).setOffset(0).render(t),this},tmpHeights:{table:100,meteogram:85,wind:0,waves:0},renderBackground:function(t){var e,i=t&&t.tempH||this.tmpHeights[this.options.display],n=l(".forecast-table canvas",this.el);return this.canvas=s.canvas.init(n,this.dataLength,this.tdWidth,this.getHeight()),s.dayNight.mixinCanvas(this.canvas).render(this.data),i&&(this.options.zuluMode&&(i+=18),"meteogram"===this.options.display?s.dewpointTemp.mixinCanvas(this.canvas).setHeight(i).render(this.data.temp,this.data.dewPoint):s.temp.mixinCanvas(this.canvas).setHeight(i).render(this.data.temp)),(e=l(".td-rain td:first-child",this.tableEl))&&s.rain.mixinCanvas(this.canvas).setHeight(30).setOffset(e.offsetTop+e.offsetHeight-58).render(this.data,.3).resetCanvas(),this},init:function(t,e,i){return this.options=i||{},this.weatherData(e,i),this.tdWidth=this.options.tdWidth,this.rows=i.rows,this.header=e.header,this.start=this.data.ts[0],this.hours=this.dataLength,this.end=this.data.ts[this.hours-1],this.tsWidth=this.hours*i.step*n.tsHour,this.pxWidth=this.hours*this.tdWidth,this.px2ts=this.tsWidth/this.pxWidth,this.nowPosition=(Date.now()-this.start+.5*i.step*n.tsHour)/this.px2ts,this.step=i.step,this.options.is12hFormat=c.is12hFormat(),this.options.zuluMode=c.get("zuluMode"),this.options.zuluMode&&"hourZulu"!==this.rows[1]&&this.rows.splice(1,0,"hourZulu"),this.el=t,this.tableEl=l(".forecast-table table",t),this.syncCounter++,this},renderTable:function(){var t,e=this,i=l(".legend",this.el),n=l(".data-table",this.el);i.innerHTML=this.renderLegend(),(t=l(".model-info",this.el))&&(t.innerHTML=this.renderInfo());var s=this.renderTableDays();return this.rows.forEach(function(t){s+=r[t].renderRow(e.data,e.options,e.header)}),this.tableEl.innerHTML=s,this.tableEl.style.width=l(".forecast-table",this.el).style.minWidth=this.hours*this.options.tdWidth+"px",n&&(n.style.height=i.offsetHeight+"px"),l(".forecast-table b",this.el).style.left=this.nowPosition+"px",this},getHeight:function(){return this.tableEl.offsetHeight-l("tr:first-child",this.tableEl).offsetHeight}})}),
/*! */
W.define("weatherTable",["products","Row","WaveRow","WindCombined","rootScope","trans","overlays","utils","colorsExtended"],function(n,a,t,s,o,e,m,r,i){var h={};return h.hour=a.instance({ident:"hour",legendTrans:"D_HOURS",renderTD:function(t,e,i,n){return this.options.timestamps&&r.contains(this.options.timestamps,i.ts[n])&&this.classes.push("triggered"),this.options.is12hFormat?(0<t?(t+11)%12+1:0)+"<small>"+(12<=t?"PM":"AM")+"</small>":t}}),h.hourZulu=a.instance({ident:"hourZulu",propName:"ts",renderTD:function(t){return r.pad(new Date(t).getUTCHours())+"Z"}}),h.icon=a.instance({ident:"icon",propName:"icon2",renderTD:function(t,e,i,n){var s=i.isDay[n],r=i.moonPhase[n],a=s<1&&.5<s||-.5<s&&s<=0?"_night_"+r:"";return'<img src="'+o.iconsDir+"/png_25px/"+t+a+'.png"\n                    srcset="'+o.iconsDir+"/png_25@2x/"+t+a+'.png 2x">'}}),h.temp=a.instance({ident:"temp",renderTD:function(t,e){return e+"°"}}),h.tempCombined=a.instance({ident:"tempCombined",propName:"temp",metric:"temp",legendName:e.TEMP+"<br>"+e.DEW_POINT,renderTD:function(t,e,i,n){return e+"°<small>"+this.convert(i.dewPoint[n])+"°</small>"}}),h.pressure=a.instance({ident:"pressure",renderTD:function(t,e,i,n){var s=i.pressure,r=s.length-1,a=s[Math.max(0,n-1)],o=s[Math.min(r,n+1)];return a<t&&o<t?e:t<a&&t<o?e:""}}),h.airTemp=a.instance({ident:"airTemp",metric:"temp",acceptNullValues:!0,legendTrans:"TEMP",renderTD:function(){return""}}),h.wind=a.instance({ident:"wind",colors:"windDetail"}),h.windCombined=s.instance({propName:"wind",legendName:e.WIND+"<br>"+e.GUST,renderTD:function(t,e,i,n){var s=i.windDir[n];return'<div style="transform: rotate('+s+"deg);\n                    -webkit-transform:rotate("+s+'deg);">#</div>'+e+"<small>"+("gust"in i?this.convert(i.gust[n]):"-")+"</small>"}}),h.gust=a.instance({ident:"gust",metric:"wind",colors:"windDetail"}),h.windDir=a.instance({ident:"windDir",legendTrans:"WIND_DIR",renderTD:function(t){return'<div style="transform: rotate('+t+"deg); -webkit-transform:rotate("+t+'deg);">4</div>'}}),h.rain=a.instance({ident:"rain",legendTrans:"JUST_RAIN",propName:"mm",renderTD:function(t,e,i,n){var s=i.warnings&&i.warnings[n],r=s&&/^[MSE][RT]/.test(s);return i.snow[n]&&.1<t?(this.classes.push("snow"),1<(t=m.snowAccu.convertNumber(t))&&(t=Math.round(t)),t+=m.snowAccu.metric):!i.snow[n]&&.1<t?(5<(t=e)&&(t=Math.round(t)),r&&(t+="!")):t="",t}}),h.rainClouds=a.instance({ident:"rainClouds",metric:"rain",propName:"mm",legendTrans:"CLOUDS",maxDivHeight:50,renderLegend:function(t){return a.renderLegend.call(this,t,'<div><span class="legend-left l-rc-note l-rc-rain" data-t="JUST_RAIN"></span><span class="legend-right iconfont l-rc-rain">9</span></div>\n         <div><span class="legend-left l-rc-note l-rc-conv" data-t="CONVECTIVE_RAIN"></span><span class="legend-right iconfont l-rc-conv">~</span></div>\n         <div><span class="legend-left l-rc-note l-rc-snow" data-t="SNOW"></span><span class="legend-right iconfont l-rc-snow">8</span></div>')},rainHeight:function(t){return t<5?7*t:35+1*(t-5)},renderTD:function(t,e,i,n){var s="",r="",a=i.snow[n]&&i.snowPrecip[n]||0,o=i.convPrecip&&i.convPrecip[n]||0,h=i.mm[n]-a-o,l=.1<a?a<5?10*a:50+2.5*(a-5):0,d=.1<h?this.rainHeight(h):0,c=.1<o?this.rainHeight(o):0,u=(l+d+c)/this.maxDivHeight;return 1<u&&(l/=u,d/=u,c/=u),l&&(1<(a=m.snowAccu.convertNumber(a))&&(a=Math.round(a)),s='<div class="td-m-snow">'+a+m.snowAccu.metric+"</div>",r='<div class="td-m-snowbar" style="height: '+l+'px;"></div>'),d&&(5<(h=this.convert(h))&&(h=Math.round(h)),s+='<div class="td-m-rain">'+h+"</div>",r+='<div class="td-m-rainbar" style="height: '+d+'px;"></div>'),c&&(5<(o=this.convert(o))&&(o=Math.round(o)),s+='<div class="td-m-conv">'+o+"</div>",r+='<div class="td-m-convbar" style="height: '+c+'px;"></div>'),""+s+r}}),h.cbase=a.instance({ident:"cbase",metric:"altitude",legendTrans:"CLOUD_ALT",colors:"altitudeDetail",renderRow:function(t,e,i){for(var n=t.cbase,s=0;s<n.length;s++){var r=n[s];(null===r||isNaN(r)||void 0===r)&&(n[s]=1e5)}return a.renderRow.call(this,t,e,i)},renderTD:function(t,e){return 5e4<e?"--":1e4<e?Math.floor(e/1e3)+"k":e}}),h.waves=t.instance({ident:"waves"}),h.swell1=t.instance({ident:"swell1"}),h.swell1Period=a.instance({metric:"period",colors:"periodDetail",ident:"swell1Period",legendTrans:"SWELLPER"}),o.globalPointProducts.concat(o.localPointProducts).forEach(function(t){var e=t+"/windCombined",i=n[t];h[e]=s.instance({model:t,propName:t+"/wind",dirPropName:t+"/windDir",gustPropName:t+"/gust",legendName:i.modelName+(i.modelResolution?"&nbsp;"+i.modelResolution+"km":"")})}),h.windCombinedEmpty=s.instance({propName:"hours",legendName:"&nbsp;",renderTD:function(){return"&nbsp;"}}),h});