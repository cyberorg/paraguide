/*! */
W.define("detailBar",["detail","store","format","rootScope","$","utils","Drag","GhostBox"],function(a,o,d,e,l,s,t,i){var n;return e.isMobile||(n=t.instance(i,{el:l(".main-timecode",a.el),progressLine:l(".data-table .progress-line",a.el),played:l(".data-table .progress-line .played",a.el),box:l(".main-timecode.desktop-timecode .box",a.el),ghost:l(".ghost-timecode.desktop-timecode",a.el),ghostBox:l(".ghost-timecode.desktop-timecode .box",a.el),dataTable:a.refs.dataTable,pBar:l(".progress-bar",a.el),latestCode:null,latestGhost:null,mouseInside:!1,hasHooks:!1,displayHour:d.getHoursFunction(),zuluMode:o.get("zuluMode"),UIident:"detailBar",_init:function(){t._init.call(this),i._init.call(this),this.progressLine.addEventListener("mouseup",this.click.bind(this)),this.debouncedBcast=s.debounce(this.bcast.bind(this),100),a.on("rendered",this.render,this),a.on("close",this.removeHooks,this)},removeHooks:function(){o.off("timestamp",this.onTsChange,this),this.hasHooks=!1},addHooks:function(){o.on("timestamp",this.onTsChange,this),this.hasHooks=!0},bcast:function(){this.timestamp=this.calcTs(),o.set("timestamp",this.timestamp,{UIident:this.UIident})},calcTs:function(){return this.start+this.timecodePos/this.pxRatio},click:function(e){this.dragging||(this.addAnimation(),this.ondrag(e.pageX-20,null,e),this.removeAnimation())},onTsChange:function(e,t){t!==this.UIident&&(this.addAnimation(),this.timecodePos=(e-this.start)*this.pxRatio,this.el.style.left=this.timecodePos+this.offset+"px",this.played.style.width=this.timecodePos+"px",this.renderHour(),this.removeAnimation())},addAnimation:function(){this.pBar.classList.add("anim-allowed"),this.el.classList.add("anim-allowed")},removeAnimation:function(){window.setTimeout(function(){this.pBar.classList.remove("anim-allowed"),this.el.classList.remove("anim-allowed")}.bind(this),300)},updateGhost:function(e){var t=e.clientX,i=this.pos2offset(t-20);i&&(this.ghostBox.textContent=this.pos2hour(i),this.ghost.style.left=t+"px")},pos2offset:function(e){return(e+=20)>this.offset?Math.min(e-this.offset,this.rightLimit):null},ondrag:function(e,t,i){(e+=20)>this.offset&&(this.timecodePos=Math.min(e-this.offset,this.rightLimit),this.el.style.left=this.timecodePos+this.offset+"px",this.played.style.width=this.timecodePos+"px",this.renderHour()),this.debouncedBcast(),i.preventDefault()},renderHour:function(){if(this.zuluMode){var e=this.calcTs();this.box.dataset.zulu=d.hourUTC(e)}this.box.textContent=this.pos2hour(this.timecodePos)},pos2hour:function(e){var t=Math.round(e/this.pxWidth*this.numberOfHours%24+this.firstHour-.5*this.step);return t<0?t=24+t:23<t&&(t-=24),this.displayHour(t)},scroll:function(e){this.offset=this.dataTable.offsetLeft-e,this.el.style.left=this.timecodePos+this.offset+"px"},render:function(e){this.hasHooks||this.addHooks();var t=o.get("calendar"),i=a.renderedTable;i&&(this.step=e.step,this.displayHour=d.getHoursFunction(),this.zuluMode=o.get("zuluMode"),this.start=i.start-.5*this.step*s.tsHour,this.firstHour=i.data.hour[0],this.pxRatio=i.pxWidth/i.tsWidth,this.pxWidth=i.pxWidth,this.rightLimit=Math.min(i.pxWidth,(t.end-this.start)*this.pxRatio),this.offset=this.dataTable.offsetLeft-this.dataTable.scrollLeft,this.progressLine.style.width=this.rightLimit+"px",this.timecodePos=Math.min(i.pxWidth,(o.get("timestamp")-this.start)*this.pxRatio),this.el.style.left=this.timecodePos+this.offset+"px",this.played.style.width=this.timecodePos+"px",this.numberOfHours=i.hours*this.step,delete this.box.dataset.zulu,this.renderHour(),l(".progress-line i",a.el).style.left=i.nowPosition+"px")}})),n}),
/*! */
W.define("detailLoader",["rootScope","detail","http","utils","weatherRenderExtended","dataManipulators","trans","plugins","multiLoad"],function(t,a,o,d,l,s,n,r,c){var i,p=a.refs.legend,m=a.refs.loader,h=a.refs.dataTable,b=function(){h.classList.remove("disabled"),m.classList.remove("show")},f=function(e){b(),a.emit("rendered",e)};function u(e,t){e.step=t.header&&t.header.step||3;var i=l.init(a.el,t,e).renderTable().renderBackground().renderAboutLocation(t);n.translateDocument(a.el),e.height=i.getHeight(),a.loadedData=t,a.renderedTable=i}return{load:function(e){o.get(t.pointForecast+"/"+e.model+"/"+e.lat+"/"+e.lon).then(function(e,t){var i=t.data;i||window.wError("detailLoader","Recieved no data"),u(e,i),/meteogram|airgram/.test(e.display)?o.get("/forecast/meteogram/"+e.model+"/"+e.lat+"/"+e.lon).then(function(e,t,i){var a=i.data;if(e===l.syncCounter&&a){var o=s.trimRhData(l.data.origTs,a);switch(t.display){case"airgram":r.airgram.load().then(function(){W.require("airgram"),l.renderAirgram(o),f(t)}),l.renderMeteogram(o);break;case"meteogram":l.renderMeteogram(o),f(t)}}}.bind(null,l.syncCounter,e)).catch(function(e){b(),window.wError("detail","Meteogram, Airgram render fail",e)}):"wind"===e.display?c(e,e.models).then(function(e,s,t){if(e===l.syncCounter){var i=t.filter(function(e){var t=e.model;return t===s.model})[0].fcst,n=i.data,r=["hour",s.model+"/windCombined"],c=[],p=1/0;t.forEach(function(e){var t=e.model,i=e.fcst,a=i.data,o=a.wind,d=a.windDir,l=a.gust;n[t+"/wind"]=o.slice(),n[t+"/windDir"]=d.slice(),n[t+"/gust"]=l.slice(),s.model!==t&&r.push(t+"/windCombined"),c.push(t),p=Math.min(p,o.length)}),d.each(n,function(e){return e.length=p}),s.rows=r,s.models=c,u(s,i),f(s)}}.bind(null,l.syncCounter,e)).catch(window.wError.bind(null,"windDisplay","Loading/rendering models")):f(e)}.bind(null,e)).catch(function(e){window.wError("detail","Detail render fail",e),b()}),e.display!==i&&(p.innerHTML=l.renderLegend(e),i=e.display),h.classList.add("disabled"),m.classList.add("show")}}}),
/*! */
W.define("detailScrollerDesktop",["detailTitles","detail","detailBar","Scrollable","DraggableDiv","rootScope"],function(i,e,a,t,o,d){var l;return d.isMobile||(l=t.instance(o,{scrollEl:e.refs.dataTable,_init:function(){t._init.call(this),o._init.call(this),e.on("rendered",this.init,this),e.on("close",this.resetScroll,this)},onscroll:function(e){var t=e.target.scrollLeft;t<0||(a.scroll(t),i.scroll(t),this.scrollTicking=!1)},init:function(){this.scrollTicking=!1,clearTimeout(this.scrollEndTimer)},resetScroll:function(){this.scrollEl.scrollLeft=0}})),l}),
/*! */
W.define("detailScrollerMobile",["detailTitles","detailSlider","store","$","detail","rootScope","Scrollable"],function(i,a,l,s,e,t,o){var d;return t.isMobile&&(d=o.instance({detailEl:e.el,scrollEl:e.refs.dataTable,wasScrolled:!1,legendHidden:!1,lastScroll:0,onMapEl:s(".detail-onmap",e.el),tdWidth:e.tdWidth,_init:function(){o._init.call(this),e.on("rendered",this.init,this),e.on("swiperight",this.onswiperight,this),e.on("close",this.resetScroll,this),e.on("clickColumn",this.clickColumn,this),e.on("scrollTo",this.scrollTo,this)},onscroll:function(e){var t=e.target.scrollLeft;t<0||(this.lastScroll=t,a.scroll(t),this.wasScrolled||(this.detailEl.classList.add("scrolled"),this.wasScrolled=!0,setTimeout(a.resize.bind(a),200)),i.scroll(t),this.scrollTicking=!1)},clickColumn:function(e){this.scrollTicking||(this.syncColumn(+e),this.bcastChange())},bcastChange:function(){l.set("timestamp",+this.columns[this.selectedColumn].dataset.ts)},syncMiddle:function(e){var t=Math.min(this.maxIndex,Math.floor((e+this.halfScreen-30)/this.tdWidth));this.syncColumn(t)},syncColumn:function(e){e!==this.selectedColumn&&(this.onMapEl.style.left=e*this.tdWidth+"px",this.selectedColumn=e)},onscrollend:function(){this.scrollTicking=!1,this.syncMiddle(this.scrollEl.scrollLeft),this.bcastChange()},init:function(){this.legendHidden=!1,this.scrollTicking=!1,clearTimeout(this.scrollEndTimer),this.initMiddleFrame(e.renderedTable)},resetScroll:function(){this.lastScroll=0,this.scrollEl.scrollLeft=0},initMiddleFrame:function(e){var t=e.data.origTs,i=l.get("calendar"),a=i&&i.end,o=l.get("timestamp");this.columns=s("#detail .data-table tr.td-hour").querySelectorAll("[data-ts]"),this.halfScreen=window.screen.width/2,this.maxIndex=this.columns.length-1;for(var d=this.selectedColumn=0;d<t.length-1;d++){if(o>=t[d]&&o<t[d+1]){this.onMapEl.style.left=(d+1)*this.tdWidth+"px",this.syncColumn(d+1);break}if(t[d]>=a){this.maxIndex=d;break}}},onswiperight:function(e){var t=this;this.lastScroll<=0&&e<-50&&this.wasScrolled&&(this.detailEl.classList.remove("scrolled"),setTimeout(a.resize.bind(a),300),setTimeout(function(){t.wasScrolled=!1},1e3))}})),d}),
/*! */
W.define("detailSlider",["detail","weatherRender","rootScope","$","utils","Drag"],function(d,t,e,i,n,a){var o;return e.isMobile&&(o=a.instance({el:i(".handle",d.el),sliderWrapperEl:i(".slider-wrapper",d.el),wrapper:i(".slider-wrapper",d.el),slEl:i(".slider",d.el),tableEl:d.refs.dataTableTable,dataTable:d.refs.dataTable,_init:function(){a._init.call(this),d.on("rendered",this.render,this),window.addEventListener("resize",this.resize.bind(this)),this.wrapper.onclick=this.click.bind(this)},click:function(e){var t=this.el.offsetWidth,i=this.wrapper.offsetWidth+5,a=n.bound(e.clientX-t/2,0,i-t),o=(this.tableEl.offsetWidth-this.dataTable.offsetWidth)*a/(i-t);e.preventDefault(),e.stopPropagation(),d.emit("scrollTo",o)},ondrag:function(e,t,i){var a=this.slEl.offsetWidth,o=this.el.offsetWidth,d=this.tableEl.offsetWidth,l=this.dataTable.offsetWidth,s=n.bound(e,0,a-o);this.el.style.left=s+"px",this.dataTable.scrollLeft=(d-l)*s/(a-o)},render:function(e){t.renderFragment(this.sliderWrapperEl,null,{iconSize:27,timestamps:e.timestamps,bgHeight:55}),this.resize()},scroll:function(e){this.el.style.left=Math.min(e*this.leftCoeficient,this.leftLimit)+"px"},resize:function(){this.el.style.width=Math.floor(100*this.dataTable.offsetWidth/this.tableEl.offsetWidth)+"%",this.leftCoeficient=this.slEl.offsetWidth/this.tableEl.offsetWidth,this.leftLimit=this.slEl.offsetWidth-this.el.offsetWidth,this.scroll(this.dataTable.scrollLeft)}})),o}),
/*! */
W.define("detailTitles",["detail"],function(e){var s=[],n=e.refs.dataTable,t=e.refs.legend;e.on("rendered",i),e.on("serviceBoxRendered",i);var o=function(e){t.dataset.title=" ",e.style.visibility="visible",e.style.position="static",e.style.float="left",e.style.opacity=1},d=function(e){t.dataset.title=" ",e.style.visibility="visible",e.style.position="static",e.style.float="right",e.style.opacity=.3},l=function(e){e.el.style.visibility="hidden",t.dataset.title=e.content};function i(){s=[];for(var e=n.querySelectorAll(".sticky-title"),t=n.getBoundingClientRect().left,i=n.scrollLeft,a=0;a<e.length;a++){var o=e[a],d=o.parentElement.getBoundingClientRect(),l=o.clientWidth;50<l&&s.push({el:o,width:l,content:o.textContent,left:d.left-t+10+i,right:d.right-t-10+i,status:0})}0<i&&r(i)}function r(e){for(var t=s.length,i=0;i<t;i++){var a=s[i];a.left>e?0!==a.status&&(a.status=0,o(a.el)):a.right-e<a.width?2!==a.status&&(a.status=2,d(a.el)):1!==a.status&&(a.status=1,l(a))}}return{init:i,scroll:r}}),
/*! */
W.define("detailUtils",["http","trans","detail","store","rootScope","map","reverseName","query","$","broadcast","utils","products","location","models"],function(o,d,p,i,m,h,e,a,l,b,s,n,t,r){var c={},f=null,u=l("#search");p.on("rendered",function(e){setTimeout(c.postRenderTasks.bind(null,e,p.loadedData,p.renderedTable),200)});var v={table:["hour","icon","temp","rain","wind","gust","windDir"],wind:["hour","windCombined"],meteogram:["hour","icon","tempCombined","windCombined","pressure","rainClouds"],airgram:["hour","airTemp","hour","rainClouds"]},g=["hour","windCombined","waves","swell1","swell1Period"];c.model2rows={ecmwf:s.include(s.clone(v),{meteogram:["hour","icon","tempCombined","windCombined","pressure","rainClouds","cbase"]}),ecmwfWaves:{waves:g},iconEu:v,gfs:v,gfsWaves:{waves:g},namConus:v,namAlaska:v,namHawaii:v,mblue:{table:v.table,wind:v.wind},arome:{table:v.table,wind:v.wind}},i.defineProperty("detailDisplay","syncSet",function(e){var t=i.get("detailProduct");return"waves"===e?(t=i.get("prefferedProduct")+"Waves",i.set("detailProduct",t)):/\S+Waves/.test(t)?(t=t.replace(/Waves/,""),i.set("detailProduct",t)):e in c.model2rows[t]||i.set("detailProduct","ecmwf"),e}),i.defineProperty("detailLocation","syncSet",function(e){var t=["ecmwf","gfs","mblue","ecmwfWaves","gfsWaves"].concat(r.betterProducts(e,"onlyPointProducts"));return i.set("detailAvailProducts",t),s.contains(t,i.get("detailProduct"))||i.set("detailProduct","ecmwf"),e}),c.modelFromMap=function(e){var t=n[i.get("product")];return t.ident in c.model2rows&&t.pointIsInBounds.call(t,e)?t.ident:null},c.productToMap=function(e,t){t=r.getProduct(i.get("overlay"),t),i.get("product")!==t&&(s.contains(m.globalProducts,t)||s.contains(r.betterProducts(e),t)?i.set("product",t):console.warn("Model product combination is not in sync"))},c.isValid=function(e,t){return e in c.model2rows&&t in c.model2rows[e]},c.getRows=function(e,t){return c.isValid(e,t)?c.model2rows[e][t].slice():c.model2rows.ecmwf.table.slice()},c.postRenderTasks=function(a,e){var t=e.header;e.data;if(m.isMobile){var i=n[a.model];i&&(p.refs.model.textContent=i.modelName)}"waves"===a.display?(b.emit("rqstClose","wind"),t.hasWaves?b.emit("rqstOpen","waves",a):console.warn("Wave forecast missing for this spot")):"wind"===a.display?(b.emit("rqstOpen","wind",a),b.emit("rqstClose","waves")):(b.emit("rqstClose","waves"),b.emit("rqstClose","wind")),"externalOpen"===a.emitter&&c.zoomPanMap(a),7<+t.daysAvail&&!a.extended?(p.el.dataset.extended=null,p.refs.extended.innerHTML=s.template(d.D_FORECAST_FOR,{duration:+t.daysAvail-1})):p.el.dataset.extended="extended","poi-icon"===a.source&&/pgspots|surfspots/.test(a.poiType)&&o.get("/pois/"+a.poiType+"/"+a.id).then(function(e){var t=e.data,i=l("#detail .model-info");i&&t.partnerLink&&(i.innerHTML="Detail of "+("pgspots"==a.poiType?"paragliding":"surfing")+' spot on: <a data-do="url,'+t.partnerLink+'"\n\t\t\t\t\tstyle="color: #9D0300;">'+(t.partnerLinkText||t.partnerLink.replace(/^.*(www\.|\/\/)([^/]+).*$/,"$2"))+"</a>")}),b.emit("detailRendered"),b.emit("log","detail2/model/"+a.model),b.emit("log","detail2/display/"+a.display)};var x=function(e){t.title(e+" "+d.WFORECAST),t.description(e+" "+d.WFORECAST+". Meteogram, airgram, wind, clouds, temperature, humidity and dew point forecast. ECMWF, WRF, GFS, NAM, NEMS and other forecast models."),a.set(e),f&&clearTimeout(f),f=setTimeout(function(){return u.style.transform=""},2e3)};return c.changeUrl=function(i){m.isMobile||(u.style.transform="scale(1.1) translate(20px,0px)"),i.name||"embed2"===m.target?x(i.name):(a.showLoader(),e.get(i,14).then(function(e){var t=e.name;a.hideLoader(),x(t),i.name=t}).catch(a.hideLoader.bind(a)))},c.zoomPanMap=function(e){var t=e.lat,i=e.lon,a=e.source,o=p.el.offsetHeight,d=m.map.zoom;if(m.isMobile){b.emit("rqstClose","picker");var l=Math.max(6,d),s=h.project({lat:t,lon:i},l);s.y+=.5*(o-40);var n=h.unproject(s,l);h.center({lat:n.lat,lon:n.lng,zoom:l},!0)}else if(/-icon|picker|label/.test(a))h.ensurePointVisibleY(t,i,o+40);else{var r=/search|url/.test(a)?8:0,c=Math.max(r,d);h.center({lat:t,lon:i,zoom:c,paddingTop:-o},!1),b.emit("rqstOpen","picker",{lat:t,lon:i,source:"detail",noEmit:!0})}},c}),
/*! */
W.tag("detail",'<div class="timecode ghost-timecode noselect desktop-timecode" style="opacity:0;"><div class="box"></div></div><div class="timecode main-timecode noselect desktop-timecode"><div class="box"></div><div class="loading ld-lgray size-l loader-path"></div></div><div class="slider-wrapper"><canvas></canvas><table></table><div class="slider"><div class="handle grab"></div></div><div class="alerts-line" style="display: none;"></div><div class="slider-rain" style="display: none;"></div></div><div class="table-wrapper show noselect notap"><div class="legend" data-ref="legend"></div><div class="data-table noselect flex-container" data-ref="dataTable"><div class="forecast-table progress-bar"><canvas></canvas><div class="progress-line"><div class="played"></div><div class="avbl"></div><i></i></div><table id="detail-data-table" class="grab" data-ref="dataTableTable"></table><b></b><span class="detail-onmap"><div class="loading size-l loader-path"></div></span><div data-do="extended" class="fg-gray size-xs inlined clickable" data-icon-after="g" data-ref="extended"></div></div><div class="stations detail-content-box grab" data-ref="stations"><div class="sticky-title" data-t="D_STATIONS"></div><div class="stations-container flex-container content-container" data-ref="stationsContainer"></div></div><div class="services detail-content-box"><div class="sticky-title" data-t="D_ABOUT_LOC2"></div><ul class="services-container content-container"></ul></div></div><div class="loading size-ultra full show" data-ref="loader"></div></div><div id="detail-box"><div class="dbitem transparent-switch compact size-s display-as" data-ref="mobileMenuSwitch"><div data-do="set,table" class="inlined" data-icon="&" data-t="ND_DISPLAY_BASIC"></div><div data-do="set,wind" class="inlined" data-icon="&#xe002;" data-t="WIND"></div><div data-do="set,meteogram" class="inlined" data-icon="&#xe015;">Meteogram</div><div data-do="set,airgram" class="inlined" data-icon="&#xe009;">Airgram</div><div data-do="set,waves" class="inlined" data-icon="{" data-t="WAVES"></div><div data-do="more" class="inlined" data-icon="&#xe024;"><b data-t="MORE"></b><b data-t="LESS"></b></div></div><div class="dbitem transparent-switch compact size-s display-model" data-ref="productSwitch"></div><span class="dbitem model-info mobilehide"></span></div><div class="webcams-circle animation uiyellow clickable" data-ref="webcams" data-beforeend="D_WEBCAMS"><div class="avatar boxshadow" data-ref="webcamsImg"></div></div><div id="detail-model-text" class="uiyellow" data-ref="model"></div>','#detail-box{color:#7a7a7a;font-size:10px;position:absolute;display:block;left:10px;bottom:9px;top:inherit;right:inherit;white-space:nowrap;z-index:50}#detail-box .dbitem{display:inline-block;white-space:nowrap;position:relative}#detail-box .model-info{margin-left:15px;top:-5px}#detail-box .model-info span{opacity:.6}#detail-box .display-model{margin-left:30px}#detail-box .display-model .seaitem{display:none}#detail-box .display-model [data-do="set,arome"],#detail-box .display-model [data-do="set,mblue"]{opacity:.6;pointer-events:none}[data-display="table"] #detail-box .display-model [data-do="set,arome"],[data-display="table"] #detail-box .display-model [data-do="set,mblue"]{opacity:1;pointer-events:all}[data-display="waves"] #detail-box .display-model .seaitem{display:table-cell}[data-display="waves"] #detail-box .display-model .landitem{display:none}#detail-box .display-as [data-do="set,waves"]{opacity:.6;pointer-events:none}[data-position="sea"] #detail-box .display-as [data-do="set,waves"]{opacity:1;pointer-events:all}#device-tablet #detail-box .transparent-switch,#device-desktop #detail-box .transparent-switch{color:inherit}#device-tablet #detail-box .transparent-switch div,#device-desktop #detail-box .transparent-switch div{border-radius:1.6em}#device-tablet #detail-box .transparent-switch div::before,#device-desktop #detail-box .transparent-switch div::before{color:#9D0300}#device-tablet #detail-box .transparent-switch .selected,#device-desktop #detail-box .transparent-switch .selected{background-color:#9D0300;color:white}#device-tablet #detail-box .transparent-switch .selected::before,#device-desktop #detail-box .transparent-switch .selected::before{color:white}#device-tablet #detail-box .display-as b,#device-desktop #detail-box .display-as b,#device-tablet #detail-box .display-as [data-do="more"],#device-desktop #detail-box .display-as [data-do="more"]{display:none}#device-mobile #detail-box{background-color:#9D0300;position:absolute;left:0;right:0;bottom:-35px;width:100%;height:85px;border-top:solid #e5e5e5 5px;transition:all .3s}#device-mobile #detail-box .display-model{color:white;font-size:12px;position:absolute;display:block;bottom:8px;margin-left:10px;width:100%;text-align:center;background:none;overflow:auto;padding-bottom:20px;margin-bottom:-20px}#device-mobile #detail-box .display-model div{padding:.2em .8em}#device-mobile #detail-box .display-model .selected{background:#c38281}#device-mobile #detail-box .display-model [data-do="rqstOpen,multimodel"]::before{position:relative;font-size:1.2em;top:.28em;padding-right:.35em}#device-mobile #detail-box .display-as{margin-left:45px;display:block;height:45px;font-size:8px}#device-mobile #detail-box .display-as div{width:16.666%;color:white;text-align:center;display:inline-block;height:45px;position:relative;letter-spacing:.15em;overflow:hidden;padding-top:30px}#device-mobile #detail-box .display-as div::before{position:absolute;left:50%;margin-left:-0.5em;top:50%;display:block;font-size:18px;margin-top:-14px}#device-mobile #detail-box .display-as div.selected{text-decoration:underline;background:none}#device-mobile #detail-box .display-as div[data-do="more"]::before{font-size:30px;margin-top:-20px}#device-mobile #detail-box .display-as div b{font-weight:normal}#device-mobile #detail-box [data-t="LESS"]{display:none}#device-mobile .display-more #detail-box{bottom:0}#device-mobile .display-more #detail-box [data-t="LESS"]{display:block}#device-mobile .display-more #detail-box [data-t="MORE"]{display:none}.ondetail #fav{display:block}.ondetail #rh-bottom,.ondetail #weather,.ondetail #share,.ondetail #mobile-menu,.ondetail #poismodel{display:none}.ondetail #rhpane{margin-bottom:10px;margin-top:10px}.ondetail #rhpane #ovr-menu{display:none}.ondetail #rhpane #overlay{margin-bottom:15px}.ondetail .picker .picker-content span{padding-right:20px}.ondetail .picker .picker-content .picker-share,.ondetail .picker .picker-content .picker-link{display:none}#device-mobile .ondetail #logo,#device-mobile .ondetail #user{display:none !important}@media screen and (max-height:400px){.ondetail #search{display:none}}.onwebcam #detail{transition:opacity 2s;opacity:0}#detail{pointer-events:auto;width:100vw;position:relative;z-index:10;transition:margin-bottom .3s ease-in-out;-webkit-transition:margin-bottom .3s ease-in-out;margin-bottom:-110%;font-size:12px;color:#222;box-shadow:content-box}#detail a{color:inherit}#detail a:hover{opacity:initial}#detail.open{margin-bottom:0}#detail .closing-x{display:block}#device-tablet #detail .closing-x,#device-desktop #detail .closing-x{font-size:40px;top:-0.7em;left:.1em;right:initial}#detail .table-wrapper{white-space:nowrap;position:relative;overflow:hidden}#detail .table-wrapper .progress-line{border:none;border-bottom:10px solid transparent;margin-bottom:-10px;top:0}#detail .timecode{font-size:13px}#detail .timecode.anim-allowed{-webkit-transition:all ease-in-out .25s;transition:all ease-in-out .25s}#detail .legend::after{color:#565656;white-space:nowrap;font-size:14px;content:attr(data-title);display:block;position:absolute;top:5px;left:100%}#detail .forecast-table{display:inline-block}#detail .forecast-table .detail-onmap{display:none}#detail .forecast-table [data-do="extended"]{position:absolute;right:18px;top:20px;transform:rotate(-90deg);transform-origin:right;z-index:50;opacity:.7;border-top:solid 10px transparent}#device-desktop #detail .forecast-table [data-do="extended"]{top:25px}#detail .forecast-table::after{position:absolute;right:0;top:0;display:block;height:100%;width:70px;margin-top:20px;overflow:hidden;z-index:45;content:\'\';background:linear-gradient(to right, rgba(255,255,255,0), rgba(248,248,248,0.9) 75%, rgba(248,248,248,0.9))}#detail[data-display="wind"] .forecast-table [data-do="extended"],#detail[data-extended="extended"] .forecast-table [data-do="extended"],#detail[data-display="wind"] .forecast-table::after,#detail[data-extended="extended"] .forecast-table::after{display:none}#detail .data-table{transition:.3s opacity 0s;-webkit-transition:.3s opacity 0s;overflow-y:hidden;overflow-x:scroll;-webkit-overflow-scrolling:touch;-webkit-flex-direction:row;-moz-flex-direction:row;flex-direction:row;box-sizing:content-box;position:relative}#detail .data-table::-webkit-scrollbar{display:none}#detail .data-table .td-windCombined.d-display-meteogram td{border-top:1px solid #e5e5e5;border-bottom:1px solid #e5e5e5}#detail .data-table .d-display-airgram .day-end{border-color:rgba(208,208,208,0.25)}#detail .data-table .td-hour.d-display-airgram td{color:#fdffaf;font-weight:bold;text-shadow:0 0 1px black}#detail .data-table .td-hour td.triggered{background-color:rgba(157,3,0,0.64);color:white;font-weight:bold;padding-top:2px}#detail #detail-model-text{position:absolute;right:5px;top:-15px;font-size:11px;pointer-events:none}#detail .detail-content-box{display:inline-block;white-space:nowrap;position:relative;top:8px;padding:7px 10px}#detail .content-container{clear:both;white-space:nowrap;position:absolute;top:28px;left:0}#detail .stations.detail-content-box{padding-left:15px}#detail .weather-icon{opacity:.6}#detail .weather-icon span{border:10px solid transparent;background-clip:padding-box;margin-left:-10px;margin-top:-10px;white-space:nowrap;color:white;font-size:10px;line-height:1.5;padding:1px 5px 1px 3px}#detail .weather-icon span div{pointer-events:none;display:inline-block;font-size:9px;margin-right:3px;position:relative;top:1px}#detail .weather-icon.weather-icon-noamin{animation:none;-webkit-animation:none}#device-tablet #detail::before,#device-desktop #detail::before{content:\' \';background-color:#f8f8f8;width:100%;height:100%;position:absolute;top:8px}#device-tablet #detail .legend,#device-desktop #detail .legend{padding-bottom:1px;margin-top:8px}#device-tablet #detail .data-table,#device-desktop #detail .data-table{padding-bottom:66px;margin-bottom:-20px}#device-tablet #detail .data-table table,#device-desktop #detail .data-table table{top:2px}#device-tablet #detail .forecast-table canvas,#device-desktop #detail .forecast-table canvas{top:36px}#device-mobile #detail,#device-tablet #detail{-webkit-tap-highlight-color:rgba(0,0,0,0);position:fixed;left:0;right:0}#device-mobile #detail{background-color:rgba(68,65,65,0.84)}#device-mobile #detail .progress-line,#device-mobile #detail .desktop-timecode{display:none}#device-mobile #detail .table-wrapper{background-color:#f8f8f8}#device-mobile #detail .slider-wrapper{display:block;padding:7px 5px}#device-mobile #detail .slider-wrapper canvas{top:10px}#device-mobile #detail[data-extended="extended"] .slider-wrapper table td img{width:12px}#device-mobile #detail .closing-x{transition:bottom .3s}#device-mobile #detail.display-more .closing-x{bottom:38px}#device-mobile #detail .sticky-title{text-transform:uppercase;font-size:12px}#device-mobile #detail .detail-content-box{padding-top:8px;top:0}#device-mobile #detail .content-container{top:28px}#device-mobile #detail .stations{width:350px}#device-mobile #detail .legend .legend-right{width:30px;font-size:10px}#device-mobile #detail .legend .legend-left{padding-left:0;font-size:10px}#device-mobile #detail .legend::after{text-transform:uppercase;font-size:12px;top:7px}#device-mobile #detail .data-table{font-size:13px;transition:padding .3s;padding-bottom:50px;margin-bottom:0}#device-mobile #detail .data-table .forecast-table b{top:28px}#device-mobile #detail .data-table .forecast-table td{width:34px}#device-mobile #detail .data-table .forecast-table .td-days td{width:inherit}#device-mobile #detail .data-table .forecast-table .detail-onmap{pointer-events:none;position:absolute;display:block;top:28px;width:34px;bottom:0;border:#9D0300 1px solid;border-radius:5px;z-index:10;opacity:.2}#device-mobile #detail .data-table .forecast-table .detail-onmap .loading{position:absolute;top:-22px;left:10px}#device-mobile #detail.display-more .data-table{padding-bottom:85px}#device-mobile #detail[data-display="meteogram"] .slider-wrapper canvas,#device-mobile #detail[data-display="wind"] .slider-wrapper canvas,#device-mobile #detail[data-display="waves"] .slider-wrapper canvas,#device-mobile #detail[data-display="airgram"] .slider-wrapper canvas,#device-mobile #detail[data-display="meteogram"] .slider-wrapper table td img,#device-mobile #detail[data-display="wind"] .slider-wrapper table td img,#device-mobile #detail[data-display="waves"] .slider-wrapper table td img,#device-mobile #detail[data-display="airgram"] .slider-wrapper table td img,#device-mobile #detail[data-display="meteogram"] .slider-wrapper table td big,#device-mobile #detail[data-display="wind"] .slider-wrapper table td big,#device-mobile #detail[data-display="waves"] .slider-wrapper table td big,#device-mobile #detail[data-display="airgram"] .slider-wrapper table td big{display:none}#device-mobile #detail[data-display="meteogram"] .slider-wrapper table td,#device-mobile #detail[data-display="wind"] .slider-wrapper table td,#device-mobile #detail[data-display="waves"] .slider-wrapper table td,#device-mobile #detail[data-display="airgram"] .slider-wrapper table td{font-size:14px;padding-bottom:4px}#detail.scrolled:not([data-display="wind"]) .legend{margin-left:-70px}#detail[data-display="wind"].scrolled .legend [data-do="metric,hour"]{display:none}#detail[data-display="wind"].scrolled .legend .legend-right{position:absolute;right:0;top:15px}',"",function(e){var t=W.require,i=this.node,l=t("detail"),o=t("rootScope");l.el=i,l.refs=this.refs,l.tdWidth=o.isMobile?34:30;var s=t("utils"),n=t("store"),d=t("broadcast"),a=t("query"),r=t("map"),c=t("location"),p=t("favs"),m=t("metrics"),h=t("picker"),b=t("detailLoader"),f=t("products"),u=t("models"),v=t("BindedSwitch"),g=t("ClickHandler"),x=t("Swipe"),w=t("singleclick"),y=t("detailUtils"),k=t("nearestStations"),T=t("NearestWebcams");t("weatherRenderExtended"),t("detailUtils"),t("detailLoader"),t("detailTitles"),t("detailSlider"),t("detailScrollerMobile"),t("detailScrollerDesktop"),t("detailBar");var C=!1,S=null,M=null,E=s.debounce(function(){var e=n.get("detailDisplay"),t=n.get("detailProduct"),i=n.get("detailLocation"),a=y.getRows(t,e),o=n.get("detailExtended");a||console.error("Bad combination");if("wind"===(i=s.include(i,{display:e,model:t,rows:a,tdWidth:l.tdWidth,iconSize:25,days:o?12:6,extended:o})).display){i.days=5,i.tempBgH=83,i.models=u.getPointProducts(i);for(var d=0;d<i.models.length-1;d++)i.rows.push("windCombinedEmpty")}b.load(i),c.url(i.lat+"/"+i.lon+("table"!==i.display?"/"+i.display:""))},100);function z(){S&&(r.removeLayer(S),S=null),M&&(M.classList.remove("selected"),M=null)}function P(e){h[e]("pickerOpened",D),h[e]("pickerMoved",D),d[e]("metricChanged",E),n[e]("detailDisplay",E),n[e]("detailProduct",E),n[e]("detailExtended",E),w[e]("detail",D),C="on"===e}function D(e){e.lat=s.normalizeLatLon(e.lat),e.lon=s.normalizeLatLon(e.lon),e.timestamps=p.hasTimestamps(e.alertId||e),n.set("detailLocation",e),E(),y.changeUrl(e)}l.on("rendered",function(e){y.productToMap(e,e.model),z(),e.sourceEl&&e.sourceEl.classList&&(M=e.sourceEl,e.sourceEl.classList.add("selected"));S=L.marker([e.lat,e.lon],{icon:r.myMarkers.pulsatingIcon}).addTo(r),i.dataset.model=e.model,i.dataset.display=e.display,i.dataset.position=l.loadedData.celestial.atSea<1?"sea":"land",0}),this.onclose=function(){l.emit("close"),H.close(),c.reset(),a.set(""),d.emit("rqstClose","multimodel"),d.emit("rqstClose","waves"),d.emit("rqstClose","wind"),d.emit("rqstClose","lookr"),d.emit("rqstClose","webcam"),d.emit("rqstClose","detail-webcams"),z(),C&&P("off")},this.onopen=function(e){if(n.set("detailExtended",!1),!C){var t;"embed2"!==o.target&&(t=y.modelFromMap(e))&&(/Waves/.test(t)&&n.set("detailDisplay","waves"),n.set("detailProduct",t)),"url"===e.source&&e.display&&n.set("detailDisplay",e.display);var i=t||n.get("detailProduct"),a=n.get("detailDisplay");y.isValid(i,a)||n.set("detailDisplay","table"),P("on"),setTimeout(d.emit.bind(d,"log","detail2/source/"+(e.source||"")),2e3),l.emit("open")}e.emitter="externalOpen",D(e)};k({el:this.refs.stations,container:this.refs.stationsContainer});var H=T.instance({webcamsEl:this.refs.webcams,webcamsImg:this.refs.webcamsImg});v.instance({el:l.refs.mobileMenuSwitch,bindStore:"detailDisplay",more:function(){i.classList.toggle("display-more")}}),v.instance({el:l.refs.productSwitch,bindStore:"detailProduct",_init:function(){v._init.call(this),n.on("detailAvailProducts",this.redraw,this),this.redraw()},redraw:function(){var e=n.get("detailAvailProducts"),t=n.get("detailProduct"),i=e.map(function(e){var t=f[e],i=t.modelName,a=t.modelResolution;return'<div data-do="set,'+e+'" '+(a?'data-tooltip="'+a+'km"':"")+'\n\t\t\t\t\t\t\tclass="'+(/Waves/.test(e)?"seaitem":"landitem")+' tooltip-up">'+i+"</div>"}).join("");this.el.innerHTML=i+'<div data-do="rqstOpen,multimodel" class="inlined" data-icon="&#xe00f;" data-t="COMPARE"></div>',this.set(t)}}),g.instance({el:this.node,stopPropagation:!0,click:function(e,t){switch(e){case"metric":m[t]&&m[t].cycleMetric();break;case"index":l.emit("clickColumn",t);break;case"extended":n.set("detailExtended",!0)}}}),x.instance({el:this.node,_swipeTresholdY:30,onswipe:function(e,t){"right"===e?l.emit("swiperight",t):"up"===e?d.emit("rqstOpen","webcam",n.get("detailLocation")):"down"===e&&d.emit("rqstClose","detail")}})});